/* General project styling */
.projects {
    overflow-x: hidden;
}

.project {
    padding-bottom: 5em;

    &:first-child {
        padding-top: 3em;
    }

    @media screen and (--medium-viewport) {
        padding-bottom: 6em;

        &:first-child {
            padding-top: 6em;
        }
    }

    ul {
        list-style: none;
    }

    html:not(.view-list) & {
        ul {
            @media screen and (--medium-viewport) {
                display: flex;
                flex-wrap: wrap;
                margin: -0.4em;
            }

            @media screen and (--large-viewport) {
                margin: -0.3em;
            }
        }

        li {
            transition: 0.08s transform ease;

            &:nth-child(5) {
                position: relative;
                z-index: 5;

                .collapsed & {
                    transform: scale(1.5);
                }
            }
        }
    }

    li {
        width: 100%;
        padding: 0 0.5em 0.5em;
        box-sizing: border-box;

        @media screen and (--medium-viewport) {
            width: 33.333%;
            padding: 0.4em;
        }

        @media screen and (--large-viewport) {
            padding: 0.3em;
        }
    }

    .description {
        margin: 0 auto;
        max-width: 32em;
        padding: 0 0.5em;
    }

    /* Flickty specific styling */
    .flickity-enabled:focus {
        outline: none;
    }

    .flickity-viewport {
        position: relative;
        height: 100%;
    }

    .flickity-slider {
        position: absolute;
        width: 100%;
        height: 100%;

        &.is-dragging a {
            pointer-events: none;
        }
    }

    .is-pointer-down a {
        cursor: grabbing;
    }
}

.overlay-open {
    position: relative;
    overflow: hidden;
}

/* Zoom-in */
[data-zoomable] {
    display: block;
	cursor: zoom-in;

	&.is-active {
        display: block;
		position: relative;
		z-index: 100;
        transition: transform 0.16s;

        &::before {
			content: "";
			position: absolute;
			top: -100vh;
			left: -100vw;
			width: 100%;
			height: 100%;
			padding: 100vh 100vw;
			background-color: rgba(255, 255, 255, 0.85);
			z-index: -1;
			visibility: hidden;
			opacity: 0;
			transition: visibility 0s linear 0.14s, opacity 0.14s 0s;
			will-change: visibility, opacity;
			transform: translateZ(0);
		}
	}

	&.is-zoomed,
	&.is-zooming {
		cursor: zoom-out;

        &::before {
			visibility: visible;
			opacity: 1;
			transition: visibility 0s linear 0s, opacity 0.4s 0s;
		}
	}
}


/* Progressive media
-------------------------------------------------- */
.progressive-media {
    position: relative;
    overflow: hidden;
    background: #dedede;

    canvas {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        visibility: visible;
        opacity: 1;
    }

    .thumb {
        display: none;
    }

    .media {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        visibility: hidden;
        opacity: 0;
        backface-visibility: hidden;
    }

    &.media-loaded {
        background: none;

        canvas {
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s linear .5s,opacity .1s .4s;
        }

        .media {
            visibility: visible;
            opacity: 1;
            transition: visibility 0s linear 0s, opacity .4s 0s;
        }
    }
}
